#12-6-14 Note: this version puts all sources files needed in
#BayesVarSel/src in ./sources
#Only changes main.c and mainGibbs.c
#If priorprob.{c,h}, allBF.{c,h} auxiliaryfuncs.{c,h} or Gibbsauxiliaryfuncs.{c,h}
#need to be changes this should be performed by hand.
#Note in this regard that auxiliaryfuncs has different functions for priorprob=SB
#or priorprob=Constant
#This version contemplates: priorprob=ScottBerger and Constant and
#Bayes Factors=gprior, Robust, Liang and ZS 
#Inputs are for main.c: maiHeader.c and mainTemplateVnew.c (main body) where Vnew is the version
#and for mainGibbs.c: mainGibbsHeader.c and mainGibbsTemplateVnew.c (main body) 
#The file templates sould be versions with gConst (ie gBayesFactor and constant priorprobs)


#main:
    #(cp mainTemplateVnew.c mainTemplate.c)

	######main
	rm ./sources/main.c

	####build main.c
	###add common features of main.c	
	cp mainHeader.c ./sources/main.c
	
	###specific features of main.c		
	##add gConst (the one in the Template)
	cat mainTemplate.c >> ./sources/main.c
	##add gSB (first change is name, second is BayesFactor, third and fourth is the prior over model space)
	sed -e 's/gConst/gSB/g;s/gBF21fun/RobustBF21fun/g;s/Constmainalgebraics/SBmainalgebraics/g;s/Constpriorprob/SBpriorprob/g' mainTemplate.c >> ./sources/main.c
	##add RobustConst
	sed -e 's/gConst/RobustConst/g;s/gBF21fun/RobustBF21fun/g' mainTemplate.c >> ./sources/main.c
	##add RobustSB
	sed -e 's/gConst/RobustSB/g;s/gBF21fun/RobustBF21fun/g;s/Constmainalgebraics/SBmainalgebraics/g;s/Constpriorprob/SBpriorprob/g' mainTemplate.c >> ./sources/main.c
	##add LiangConst
	sed -e 's/gConst/LiangConst/g;s/gBF21fun/LiangBF21fun/g' mainTemplate.c >> ./sources/main.c
	##add LiangSB
	sed -e 's/gConst/LiangSB/g;s/gBF21fun/LiangBF21fun/g;s/Constmainalgebraics/SBmainalgebraics/g;s/Constpriorprob/SBpriorprob/g' mainTemplate.c >> ./sources/main.c
	##add ZSConst
	sed -e 's/gConst/ZSConst/g;s/gBF21fun/ZSBF21fun/g' mainTemplate.c >> ./sources/main.c
	##add ZSSB
	sed -e 's/gConst/ZSSB/g;s/gBF21fun/ZSBF21fun/g;s/Constmainalgebraics/SBmainalgebraics/g;s/Constpriorprob/SBpriorprob/g' mainTemplate.c >> ./sources/main.c
		
	rm mainTemplate.c
	
#mainGibbs:
    #(cp mainGibbsTemplateVnew.c mainGibbsTemplate.c)

	######main
	rm ./sources/mainGibbs.c

	####build main.c
	###add common features of main.c	
	cp mainGibbsHeader.c ./sources/mainGibbs.c

	###specific features of main.c		
	##add gConst (the one in the Template)
	cat mainGibbsTemplate.c >> ./sources/mainGibbs.c
	##add GibbsgSB
	sed -e 's/GibbsgConst/GibbsgSB/g;s/gBF21fun/RobustBF21fun/g;s/Constpriorprob/SBpriorprob/g' mainGibbsTemplate.c >> ./sources/mainGibbs.c
	##add GibbsRobustConst
	sed -e 's/GibbsgConst/GibbsRobustConst/g;s/gBF21fun/RobustBF21fun/g' mainGibbsTemplate.c >> ./sources/mainGibbs.c
	##add GibbsRobustSB
	sed -e 's/GibbsgConst/GibbsRobustSB/g;s/gBF21fun/RobustBF21fun/g;s/Constpriorprob/SBpriorprob/g' mainGibbsTemplate.c >> ./sources/mainGibbs.c
	##add GibbsLiangConst
	sed -e 's/GibbsgConst/GibbsLiangConst/g;s/gBF21fun/LiangBF21fun/g' mainGibbsTemplate.c >> ./sources/mainGibbs.c
	##add GibbsLiangSB
	sed -e 's/GibbsgConst/GibbsLiangSB/g;s/gBF21fun/LiangBF21fun/g;s/Constpriorprob/SBpriorprob/g' mainGibbsTemplate.c >> ./sources/mainGibbs.c
	##add GibbsZSConst
	sed -e 's/GibbsgConst/GibbsZSConst/g;s/gBF21fun/ZSBF21fun/g' mainGibbsTemplate.c >> ./sources/mainGibbs.c
	##add GibbsZSSB
	sed -e 's/GibbsgConst/GibbsZSSB/g;s/gBF21fun/ZSBF21fun/g;s/Constpriorprob/SBpriorprob/g' mainGibbsTemplate.c >> ./sources/mainGibbs.c

	rm mainGibbsTemplate.c

